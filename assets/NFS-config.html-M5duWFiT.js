import{_ as a,c as n,a as l,o as i}from"./app-De0gDzHR.js";const r={};function e(o,s){return i(),n("div",null,s[0]||(s[0]=[l(`<h1 id="nfs配置" tabindex="-1"><a class="header-anchor" href="#nfs配置"><span>NFS配置</span></a></h1><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><div class="hint-container info"><p class="hint-container-title">(*´▽｀)ノノ</p><p>    <strong>NFS</strong>（Network File System） 是由 Sun Microsystems 开发的一种<strong>分布式文件系统协议</strong>，允许通过网络在多台计算机之间共享文件和目录。它通过将<strong>远程存储挂载到本地文件系统</strong>，实现跨服务器的透明文件访问，广泛应用于<strong>集群存储</strong>、<strong>虚拟机共享数据</strong>、<strong>Web服务静态资源同步</strong>等场景。</p></div><hr><h2 id="安装nfs服务" tabindex="-1"><a class="header-anchor" href="#安装nfs服务"><span>安装NFS服务</span></a></h2><h3 id="_1-检测安装情况" tabindex="-1"><a class="header-anchor" href="#_1-检测安装情况"><span>1.检测安装情况</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">rpm</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -qa</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">grep</span><span style="color:#98C379;--shiki-dark:#98C379;"> nfs-utils</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">rpm</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -qa</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">grep</span><span style="color:#98C379;--shiki-dark:#98C379;"> rpcbind</span></span></code></pre></div><h3 id="_2-未安装情况" tabindex="-1"><a class="header-anchor" href="#_2-未安装情况"><span>2.未安装情况</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">yum</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -y</span><span style="color:#98C379;--shiki-dark:#98C379;"> install</span><span style="color:#98C379;--shiki-dark:#98C379;"> nfs-utils</span><span style="color:#98C379;--shiki-dark:#98C379;"> rpcbind</span></span></code></pre></div><h2 id="服务端配置" tabindex="-1"><a class="header-anchor" href="#服务端配置"><span>服务端配置</span></a></h2><h3 id="_1-启动rpcbind服务" tabindex="-1"><a class="header-anchor" href="#_1-启动rpcbind服务"><span>1.启动rpcbind服务</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379;"> enable</span><span style="color:#98C379;--shiki-dark:#98C379;"> rpcbind</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379;"> start</span><span style="color:#98C379;--shiki-dark:#98C379;"> rpcbind</span></span></code></pre></div><h3 id="_2-启动nfs服务" tabindex="-1"><a class="header-anchor" href="#_2-启动nfs服务"><span>2.启动NFS服务</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379;"> enable</span><span style="color:#98C379;--shiki-dark:#98C379;"> nfs</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379;"> start</span><span style="color:#98C379;--shiki-dark:#98C379;"> nfs</span></span></code></pre></div><h3 id="_3-检查rpc-服务注册状况" tabindex="-1"><a class="header-anchor" href="#_3-检查rpc-服务注册状况"><span>3.检查RPC 服务注册状况</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@study sky]# rpcinfo -p</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">   program</span><span style="color:#98C379;--shiki-dark:#98C379;"> vers</span><span style="color:#98C379;--shiki-dark:#98C379;"> proto</span><span style="color:#98C379;--shiki-dark:#98C379;">   port</span><span style="color:#98C379;--shiki-dark:#98C379;">  service</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100000</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    4</span><span style="color:#98C379;--shiki-dark:#98C379;">   tcp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    111</span><span style="color:#98C379;--shiki-dark:#98C379;">  portmapper</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100000</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    3</span><span style="color:#98C379;--shiki-dark:#98C379;">   tcp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    111</span><span style="color:#98C379;--shiki-dark:#98C379;">  portmapper</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100000</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    2</span><span style="color:#98C379;--shiki-dark:#98C379;">   tcp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    111</span><span style="color:#98C379;--shiki-dark:#98C379;">  portmapper</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100000</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    4</span><span style="color:#98C379;--shiki-dark:#98C379;">   udp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    111</span><span style="color:#98C379;--shiki-dark:#98C379;">  portmapper</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100000</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    3</span><span style="color:#98C379;--shiki-dark:#98C379;">   udp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    111</span><span style="color:#98C379;--shiki-dark:#98C379;">  portmapper</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100000</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    2</span><span style="color:#98C379;--shiki-dark:#98C379;">   udp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    111</span><span style="color:#98C379;--shiki-dark:#98C379;">  portmapper</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100024</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    1</span><span style="color:#98C379;--shiki-dark:#98C379;">   udp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  50680</span><span style="color:#98C379;--shiki-dark:#98C379;">  status</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100024</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    1</span><span style="color:#98C379;--shiki-dark:#98C379;">   tcp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  59650</span><span style="color:#98C379;--shiki-dark:#98C379;">  status</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100005</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    1</span><span style="color:#98C379;--shiki-dark:#98C379;">   udp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  20048</span><span style="color:#98C379;--shiki-dark:#98C379;">  mountd</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100005</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    1</span><span style="color:#98C379;--shiki-dark:#98C379;">   tcp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  20048</span><span style="color:#98C379;--shiki-dark:#98C379;">  mountd</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100005</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    2</span><span style="color:#98C379;--shiki-dark:#98C379;">   udp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  20048</span><span style="color:#98C379;--shiki-dark:#98C379;">  mountd</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100005</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    2</span><span style="color:#98C379;--shiki-dark:#98C379;">   tcp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  20048</span><span style="color:#98C379;--shiki-dark:#98C379;">  mountd</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100005</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    3</span><span style="color:#98C379;--shiki-dark:#98C379;">   udp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  20048</span><span style="color:#98C379;--shiki-dark:#98C379;">  mountd</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100005</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    3</span><span style="color:#98C379;--shiki-dark:#98C379;">   tcp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  20048</span><span style="color:#98C379;--shiki-dark:#98C379;">  mountd</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100003</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    3</span><span style="color:#98C379;--shiki-dark:#98C379;">   tcp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">   2049</span><span style="color:#98C379;--shiki-dark:#98C379;">  nfs</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100003</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    4</span><span style="color:#98C379;--shiki-dark:#98C379;">   tcp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">   2049</span><span style="color:#98C379;--shiki-dark:#98C379;">  nfs</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100227</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    3</span><span style="color:#98C379;--shiki-dark:#98C379;">   tcp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">   2049</span><span style="color:#98C379;--shiki-dark:#98C379;">  nfs_acl</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100003</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    3</span><span style="color:#98C379;--shiki-dark:#98C379;">   udp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">   2049</span><span style="color:#98C379;--shiki-dark:#98C379;">  nfs</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100003</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    4</span><span style="color:#98C379;--shiki-dark:#98C379;">   udp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">   2049</span><span style="color:#98C379;--shiki-dark:#98C379;">  nfs</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100227</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    3</span><span style="color:#98C379;--shiki-dark:#98C379;">   udp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">   2049</span><span style="color:#98C379;--shiki-dark:#98C379;">  nfs_acl</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100021</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    1</span><span style="color:#98C379;--shiki-dark:#98C379;">   udp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  48973</span><span style="color:#98C379;--shiki-dark:#98C379;">  nlockmgr</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100021</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    3</span><span style="color:#98C379;--shiki-dark:#98C379;">   udp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  48973</span><span style="color:#98C379;--shiki-dark:#98C379;">  nlockmgr</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100021</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    4</span><span style="color:#98C379;--shiki-dark:#98C379;">   udp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  48973</span><span style="color:#98C379;--shiki-dark:#98C379;">  nlockmgr</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100021</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    1</span><span style="color:#98C379;--shiki-dark:#98C379;">   tcp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  33609</span><span style="color:#98C379;--shiki-dark:#98C379;">  nlockmgr</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100021</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    3</span><span style="color:#98C379;--shiki-dark:#98C379;">   tcp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  33609</span><span style="color:#98C379;--shiki-dark:#98C379;">  nlockmgr</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">    100021</span><span style="color:#D19A66;--shiki-dark:#D19A66;">    4</span><span style="color:#98C379;--shiki-dark:#98C379;">   tcp</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  33609</span><span style="color:#98C379;--shiki-dark:#98C379;">  nlockmgr</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-创建共享目录" tabindex="-1"><a class="header-anchor" href="#_4-创建共享目录"><span>4.创建共享目录</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mkdir</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="color:#98C379;--shiki-dark:#98C379;"> /data/</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">chown</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -R</span><span style="color:#98C379;--shiki-dark:#98C379;"> nfsnobody.nfsnobody</span><span style="color:#98C379;--shiki-dark:#98C379;"> /data/</span></span></code></pre></div><h3 id="_5-编辑-etc-exports文件" tabindex="-1"><a class="header-anchor" href="#_5-编辑-etc-exports文件"><span>5.编辑<code>/etc/exports</code>文件</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">vim</span><span style="color:#98C379;--shiki-dark:#98C379;"> /etc/exports</span></span></code></pre></div><p>填写以下内容</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">/data/</span><span style="color:#98C379;--shiki-dark:#98C379;">  192.168.100.1/24</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">(</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">rw</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#7F848E;--shiki-dark:#7F848E;font-style:italic;--shiki-dark-font-style:italic;"># 限制192.168.100.1/24网段可访问，rw为读写权限</span></span></code></pre></div><h3 id="_6-重新加载配置文件" tabindex="-1"><a class="header-anchor" href="#_6-重新加载配置文件"><span>6.重新加载配置文件</span></a></h3><div class="language-" data-ext="" data-title=""><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span>systemctl reload nfs</span></span></code></pre></div><h3 id="_7-检查服务端共享信息" tabindex="-1"><a class="header-anchor" href="#_7-检查服务端共享信息"><span>7.检查服务端共享信息</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@study data]# showmount -e localhost</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Export</span><span style="color:#98C379;--shiki-dark:#98C379;"> list</span><span style="color:#98C379;--shiki-dark:#98C379;"> for</span><span style="color:#98C379;--shiki-dark:#98C379;"> localhost:</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">/data</span><span style="color:#98C379;--shiki-dark:#98C379;"> 192.168.100.1/24</span></span></code></pre></div><h2 id="客户端配置" tabindex="-1"><a class="header-anchor" href="#客户端配置"><span>客户端配置</span></a></h2><h3 id="_1-安装nfs" tabindex="-1"><a class="header-anchor" href="#_1-安装nfs"><span>1.安装NFS</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">yum</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -y</span><span style="color:#98C379;--shiki-dark:#98C379;"> install</span><span style="color:#98C379;--shiki-dark:#98C379;"> nfs-utils</span></span></code></pre></div><h3 id="_2-创建挂载目录" tabindex="-1"><a class="header-anchor" href="#_2-创建挂载目录"><span>2.创建挂载目录</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mkdir</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="color:#98C379;--shiki-dark:#98C379;"> /data/</span></span></code></pre></div><h3 id="_3-挂载共享目录" tabindex="-1"><a class="header-anchor" href="#_3-挂载共享目录"><span>3.挂载共享目录</span></a></h3><h4 id="_1-临时挂载" tabindex="-1"><a class="header-anchor" href="#_1-临时挂载"><span>(1).临时挂载</span></a></h4><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mount</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -t</span><span style="color:#98C379;--shiki-dark:#98C379;"> nfs</span><span style="color:#98C379;--shiki-dark:#98C379;"> 192.168.100.1:/data/</span><span style="color:#98C379;--shiki-dark:#98C379;"> /data/</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -o</span><span style="color:#98C379;--shiki-dark:#98C379;"> proto=tcp</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -o</span><span style="color:#98C379;--shiki-dark:#98C379;"> nolock</span></span></code></pre></div><h4 id="_2-永久挂载" tabindex="-1"><a class="header-anchor" href="#_2-永久挂载"><span>(2).永久挂载</span></a></h4><ul><li>方法一：将挂载命令写入<code>/etc/rc.local</code>文件<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">vim</span><span style="color:#98C379;--shiki-dark:#98C379;"> /etc/rc.local</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">chmod</span><span style="color:#98C379;--shiki-dark:#98C379;"> +x</span><span style="color:#98C379;--shiki-dark:#98C379;"> /etc/rc.d/rc.local</span></span></code></pre></div></li><li>方法二：将相关配置写入<code>/etc/fstab</code>文件<div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">192.168.100.1:/data/</span><span style="color:#98C379;--shiki-dark:#98C379;">  /data/</span><span style="color:#98C379;--shiki-dark:#98C379;"> nfs</span><span style="color:#98C379;--shiki-dark:#98C379;">  defaults</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 0</span></span></code></pre></div></li></ul><h3 id="_4-查看挂载结果" tabindex="-1"><a class="header-anchor" href="#_4-查看挂载结果"><span>4.查看挂载结果</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@study /]# df -h</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Filesystem</span><span style="color:#98C379;--shiki-dark:#98C379;">             Size</span><span style="color:#98C379;--shiki-dark:#98C379;">  Used</span><span style="color:#98C379;--shiki-dark:#98C379;"> Avail</span><span style="color:#98C379;--shiki-dark:#98C379;"> Use%</span><span style="color:#98C379;--shiki-dark:#98C379;"> Mounted</span><span style="color:#98C379;--shiki-dark:#98C379;"> on</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">devtmpfs</span><span style="color:#98C379;--shiki-dark:#98C379;">               471M</span><span style="color:#D19A66;--shiki-dark:#D19A66;">     0</span><span style="color:#98C379;--shiki-dark:#98C379;">  471M</span><span style="color:#98C379;--shiki-dark:#98C379;">   0%</span><span style="color:#98C379;--shiki-dark:#98C379;"> /dev</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">tmpfs</span><span style="color:#98C379;--shiki-dark:#98C379;">                  487M</span><span style="color:#D19A66;--shiki-dark:#D19A66;">     0</span><span style="color:#98C379;--shiki-dark:#98C379;">  487M</span><span style="color:#98C379;--shiki-dark:#98C379;">   0%</span><span style="color:#98C379;--shiki-dark:#98C379;"> /dev/shm</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">tmpfs</span><span style="color:#98C379;--shiki-dark:#98C379;">                  487M</span><span style="color:#98C379;--shiki-dark:#98C379;">   15M</span><span style="color:#98C379;--shiki-dark:#98C379;">  472M</span><span style="color:#98C379;--shiki-dark:#98C379;">   4%</span><span style="color:#98C379;--shiki-dark:#98C379;"> /run</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">tmpfs</span><span style="color:#98C379;--shiki-dark:#98C379;">                  487M</span><span style="color:#D19A66;--shiki-dark:#D19A66;">     0</span><span style="color:#98C379;--shiki-dark:#98C379;">  487M</span><span style="color:#98C379;--shiki-dark:#98C379;">   0%</span><span style="color:#98C379;--shiki-dark:#98C379;"> /sys/fs/cgroup</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">/dev/sda3</span><span style="color:#98C379;--shiki-dark:#98C379;">               27G</span><span style="color:#98C379;--shiki-dark:#98C379;">  5.6G</span><span style="color:#98C379;--shiki-dark:#98C379;">   22G</span><span style="color:#98C379;--shiki-dark:#98C379;">  21%</span><span style="color:#98C379;--shiki-dark:#98C379;"> /</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">/dev/sda1</span><span style="color:#98C379;--shiki-dark:#98C379;">              297M</span><span style="color:#98C379;--shiki-dark:#98C379;">  213M</span><span style="color:#98C379;--shiki-dark:#98C379;">   85M</span><span style="color:#98C379;--shiki-dark:#98C379;">  72%</span><span style="color:#98C379;--shiki-dark:#98C379;"> /boot</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">tmpfs</span><span style="color:#98C379;--shiki-dark:#98C379;">                   98M</span><span style="color:#98C379;--shiki-dark:#98C379;">   28K</span><span style="color:#98C379;--shiki-dark:#98C379;">   98M</span><span style="color:#98C379;--shiki-dark:#98C379;">   1%</span><span style="color:#98C379;--shiki-dark:#98C379;"> /run/user/1000</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">192.168.100.1:/data</span><span style="color:#98C379;--shiki-dark:#98C379;">   27G</span><span style="color:#98C379;--shiki-dark:#98C379;">  5.6G</span><span style="color:#98C379;--shiki-dark:#98C379;">   22G</span><span style="color:#98C379;--shiki-dark:#98C379;">  21%</span><span style="color:#98C379;--shiki-dark:#98C379;"> /data</span></span></code></pre></div><p>至此，NFS配置结束，如有需要，可配置目录权限</p><h2 id="高级选项" tabindex="-1"><a class="header-anchor" href="#高级选项"><span>高级选项</span></a></h2><h3 id="_1-核心配置" tabindex="-1"><a class="header-anchor" href="#_1-核心配置"><span>1. 核心配置</span></a></h3><table><thead><tr><th style="text-align:left;">服务端配置</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">rw</td><td style="text-align:left;">可以读写共享目录</td></tr><tr><td style="text-align:left;">ro</td><td style="text-align:left;">只读 read only</td></tr><tr><td style="text-align:left;">sync</td><td style="text-align:left;">同步,只要用户上传,就把数据写到磁盘上</td></tr><tr><td style="text-align:left;">async</td><td style="text-align:left;">异步,用户上传的数据,nfs先临时存放到内存中,过一段时间写入到磁盘. 并发高,数据可能丢失</td></tr></tbody></table><h3 id="_2-用户压缩" tabindex="-1"><a class="header-anchor" href="#_2-用户压缩"><span>2.用户压缩</span></a></h3><ul><li><p>介绍：NFS客户端挂载NFS服务端后,创建的文件默认属于nfsnobody,这种操作就叫用户压缩(映射)</p><table><thead><tr><th>服务端配置选项</th><th>说明</th></tr></thead><tbody><tr><td>root_squash</td><td>如果客户端是 root 用户访问，则到了 NFS 服务端会被压缩（<strong>默认的</strong>）</td></tr><tr><td>no_all_squash</td><td>如果客户端不是 root 用户访问，则不进行压缩（保存原始用户，<strong>默认的</strong>）</td></tr><tr><td>all_squash</td><td>所有用户都进行压缩（不是太安全）</td></tr><tr><td>anonuid 和 anongid</td><td>用于指定压缩的匿名用户（默认是 nfsnobody 用户）anonuid=65534, anongid=65534</td></tr></tbody></table><p>实际生成环境下，最好指定一个用户用于NFS，流程可如下：</p><ul><li><p>部署NFS服务，rpcbind</p></li><li><p>添加指定用户，指定UID,GID</p></li><li><p>修改服务端配置文件</p></li><li><p>客户端进行挂载测试</p></li></ul></li></ul><h3 id="_3-安全优化" tabindex="-1"><a class="header-anchor" href="#_3-安全优化"><span>3.安全优化</span></a></h3><p>​ 为尽可能保证安全性，需让客户端挂载 只能上传,而无法执行</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mount</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -o</span><span style="color:#98C379;--shiki-dark:#98C379;"> noexec,nosuid,nodev</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -t</span><span style="color:#98C379;--shiki-dark:#98C379;"> nfs</span><span style="color:#98C379;--shiki-dark:#98C379;"> 192.168.100.1:/data/</span><span style="color:#98C379;--shiki-dark:#98C379;"> /data/</span></span></code></pre></div><blockquote><p>noexec 挂载的NFS目录中如果有命令，无法运行<br> nosuid 带有suid的命令<br> nodev 带有特殊属性的文件</p></blockquote><h2 id="关于取消挂载" tabindex="-1"><a class="header-anchor" href="#关于取消挂载"><span>关于取消挂载</span></a></h2><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@study /]# umount /data/</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@study /]# df -h</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">Filesystem</span><span style="color:#98C379;--shiki-dark:#98C379;">      Size</span><span style="color:#98C379;--shiki-dark:#98C379;">  Used</span><span style="color:#98C379;--shiki-dark:#98C379;"> Avail</span><span style="color:#98C379;--shiki-dark:#98C379;"> Use%</span><span style="color:#98C379;--shiki-dark:#98C379;"> Mounted</span><span style="color:#98C379;--shiki-dark:#98C379;"> on</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">devtmpfs</span><span style="color:#98C379;--shiki-dark:#98C379;">        471M</span><span style="color:#D19A66;--shiki-dark:#D19A66;">     0</span><span style="color:#98C379;--shiki-dark:#98C379;">  471M</span><span style="color:#98C379;--shiki-dark:#98C379;">   0%</span><span style="color:#98C379;--shiki-dark:#98C379;"> /dev</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">tmpfs</span><span style="color:#98C379;--shiki-dark:#98C379;">           487M</span><span style="color:#D19A66;--shiki-dark:#D19A66;">     0</span><span style="color:#98C379;--shiki-dark:#98C379;">  487M</span><span style="color:#98C379;--shiki-dark:#98C379;">   0%</span><span style="color:#98C379;--shiki-dark:#98C379;"> /dev/shm</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">tmpfs</span><span style="color:#98C379;--shiki-dark:#98C379;">           487M</span><span style="color:#98C379;--shiki-dark:#98C379;">   15M</span><span style="color:#98C379;--shiki-dark:#98C379;">  472M</span><span style="color:#98C379;--shiki-dark:#98C379;">   4%</span><span style="color:#98C379;--shiki-dark:#98C379;"> /run</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">tmpfs</span><span style="color:#98C379;--shiki-dark:#98C379;">           487M</span><span style="color:#D19A66;--shiki-dark:#D19A66;">     0</span><span style="color:#98C379;--shiki-dark:#98C379;">  487M</span><span style="color:#98C379;--shiki-dark:#98C379;">   0%</span><span style="color:#98C379;--shiki-dark:#98C379;"> /sys/fs/cgroup</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">/dev/sda3</span><span style="color:#98C379;--shiki-dark:#98C379;">        27G</span><span style="color:#98C379;--shiki-dark:#98C379;">  5.6G</span><span style="color:#98C379;--shiki-dark:#98C379;">   22G</span><span style="color:#98C379;--shiki-dark:#98C379;">  21%</span><span style="color:#98C379;--shiki-dark:#98C379;"> /</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">/dev/sda1</span><span style="color:#98C379;--shiki-dark:#98C379;">       297M</span><span style="color:#98C379;--shiki-dark:#98C379;">  213M</span><span style="color:#98C379;--shiki-dark:#98C379;">   85M</span><span style="color:#98C379;--shiki-dark:#98C379;">  72%</span><span style="color:#98C379;--shiki-dark:#98C379;"> /boot</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">tmpfs</span><span style="color:#98C379;--shiki-dark:#98C379;">            98M</span><span style="color:#98C379;--shiki-dark:#98C379;">   32K</span><span style="color:#98C379;--shiki-dark:#98C379;">   98M</span><span style="color:#98C379;--shiki-dark:#98C379;">   1%</span><span style="color:#98C379;--shiki-dark:#98C379;"> /run/user/1000</span></span></code></pre></div>`,50)]))}const t=a(r,[["render",e],["__file","NFS-config.html.vue"]]),d=JSON.parse(`{"path":"/study/NFS-config.html","title":"NFS配置","lang":"zh-CN","frontmatter":{"date":"2025-04-12T21:54:00.000Z","icon":"study","sidebar":false,"category":["study"],"tag":["Linux","Study","NFS","运维"],"description":"NFS配置 简介 (*´▽｀)ノノ NFS（Network File System） 是由 Sun Microsystems 开发的一种分布式文件系统协议，允许通过网络在多台计算机之间共享文件和目录。它通过将远程存储挂载到本地文件系统，实现跨服务器的透明文件访问，广泛应用于集群存储、虚拟机共享数据、Web服务静态资源同步等场景。 安装NFS服务 1.检...","head":[["meta",{"property":"og:url","content":"https://blog.fzero.me/study/NFS-config.html"}],["meta",{"property":"og:site_name","content":"null's Blog"}],["meta",{"property":"og:title","content":"NFS配置"}],["meta",{"property":"og:description","content":"NFS配置 简介 (*´▽｀)ノノ NFS（Network File System） 是由 Sun Microsystems 开发的一种分布式文件系统协议，允许通过网络在多台计算机之间共享文件和目录。它通过将远程存储挂载到本地文件系统，实现跨服务器的透明文件访问，广泛应用于集群存储、虚拟机共享数据、Web服务静态资源同步等场景。 安装NFS服务 1.检..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-13T13:50:32.000Z"}],["meta",{"property":"article:author","content":"null"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:tag","content":"Study"}],["meta",{"property":"article:tag","content":"NFS"}],["meta",{"property":"article:tag","content":"运维"}],["meta",{"property":"article:published_time","content":"2025-04-12T21:54:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-13T13:50:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"NFS配置\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-04-12T21:54:00.000Z\\",\\"dateModified\\":\\"2025-04-13T13:50:32.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"null\\",\\"url\\":\\"https://blog.fzero.me\\"}]}"]]},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[]},{"level":2,"title":"安装NFS服务","slug":"安装nfs服务","link":"#安装nfs服务","children":[{"level":3,"title":"1.检测安装情况","slug":"_1-检测安装情况","link":"#_1-检测安装情况","children":[]},{"level":3,"title":"2.未安装情况","slug":"_2-未安装情况","link":"#_2-未安装情况","children":[]}]},{"level":2,"title":"服务端配置","slug":"服务端配置","link":"#服务端配置","children":[{"level":3,"title":"1.启动rpcbind服务","slug":"_1-启动rpcbind服务","link":"#_1-启动rpcbind服务","children":[]},{"level":3,"title":"2.启动NFS服务","slug":"_2-启动nfs服务","link":"#_2-启动nfs服务","children":[]},{"level":3,"title":"3.检查RPC 服务注册状况","slug":"_3-检查rpc-服务注册状况","link":"#_3-检查rpc-服务注册状况","children":[]},{"level":3,"title":"4.创建共享目录","slug":"_4-创建共享目录","link":"#_4-创建共享目录","children":[]},{"level":3,"title":"5.编辑/etc/exports文件","slug":"_5-编辑-etc-exports文件","link":"#_5-编辑-etc-exports文件","children":[]},{"level":3,"title":"6.重新加载配置文件","slug":"_6-重新加载配置文件","link":"#_6-重新加载配置文件","children":[]},{"level":3,"title":"7.检查服务端共享信息","slug":"_7-检查服务端共享信息","link":"#_7-检查服务端共享信息","children":[]}]},{"level":2,"title":"客户端配置","slug":"客户端配置","link":"#客户端配置","children":[{"level":3,"title":"1.安装NFS","slug":"_1-安装nfs","link":"#_1-安装nfs","children":[]},{"level":3,"title":"2.创建挂载目录","slug":"_2-创建挂载目录","link":"#_2-创建挂载目录","children":[]},{"level":3,"title":"3.挂载共享目录","slug":"_3-挂载共享目录","link":"#_3-挂载共享目录","children":[]},{"level":3,"title":"4.查看挂载结果","slug":"_4-查看挂载结果","link":"#_4-查看挂载结果","children":[]}]},{"level":2,"title":"高级选项","slug":"高级选项","link":"#高级选项","children":[{"level":3,"title":"1. 核心配置","slug":"_1-核心配置","link":"#_1-核心配置","children":[]},{"level":3,"title":"2.用户压缩","slug":"_2-用户压缩","link":"#_2-用户压缩","children":[]},{"level":3,"title":"3.安全优化","slug":"_3-安全优化","link":"#_3-安全优化","children":[]}]},{"level":2,"title":"关于取消挂载","slug":"关于取消挂载","link":"#关于取消挂载","children":[]}],"git":{"createdTime":1744467275000,"updatedTime":1744552232000,"contributors":[{"name":"null-sky","email":"3057311151@qq.com","commits":3}]},"readingTime":{"minutes":3.46,"words":1037},"filePathRelative":"study/NFS-config.md","localizedDate":"2025年4月12日","excerpt":"\\n<h2>简介</h2>\\n<div class=\\"hint-container info\\">\\n<p class=\\"hint-container-title\\">(*´▽｀)ノノ</p>\\n<p>&nbsp;&nbsp;&nbsp;&nbsp;<strong>NFS</strong>（Network File System） 是由 Sun Microsystems 开发的一种<strong>分布式文件系统协议</strong>，允许通过网络在多台计算机之间共享文件和目录。它通过将<strong>远程存储挂载到本地文件系统</strong>，实现跨服务器的透明文件访问，广泛应用于<strong>集群存储</strong>、<strong>虚拟机共享数据</strong>、<strong>Web服务静态资源同步</strong>等场景。</p>\\n</div>","autoDesc":true}`);export{t as comp,d as data};
