import{_ as a,c as n,a as e,o as i}from"./app-B0PqrJF9.js";const r={};function l(o,s){return i(),n("div",null,s[0]||(s[0]=[e(`<h1 id="rsync-sersync实现实时备份同步" tabindex="-1"><a class="header-anchor" href="#rsync-sersync实现实时备份同步"><span>rsync+sersync实现实时备份同步</span></a></h1><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><div class="hint-container info"><p class="hint-container-title">(*´▽｀)ノノ</p><p>    rsync 是一个常用的 Linux 应用程序，用于文件同步，差量传输，但是每次文件发生变更需要手动去执行命令完成同步，可以依赖inotify进行检测文件变更情况，但需要另外编写脚本，就在苦恼之时，发现了一款工具——<strong><a href="https://github.com/wsgzao/sersync" target="_blank" rel="noopener noreferrer">sersync</a></strong>，它国产开源，内置inotify+rsync命令，可以记录下被监听目录中发生变化的（包括增加、删除、修改）具体某一个文件或者某一个目录的名字，然后使用rsync同步的时候，只同步发生变化的文件或者目录。相对于inotify-tools遍历更快，在同步大量数据时更有优势，搭建更快，无需额外编写脚本。</p></div><hr><h2 id="环境准备" tabindex="-1"><a class="header-anchor" href="#环境准备"><span>环境准备</span></a></h2><p>操作系统：Centos 7.9</p><table><thead><tr><th style="text-align:left;">主机</th><th style="text-align:left;">IP</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">backup</td><td style="text-align:left;">192.168.100.110</td><td style="text-align:left;">rsync服务端，用于作备份服务器</td></tr><tr><td style="text-align:left;">web</td><td style="text-align:left;">192.168.100.112</td><td style="text-align:left;">rsync客户端，配合sersync推送数据到backup进行备份</td></tr></tbody></table><h2 id="安装rsync" tabindex="-1"><a class="header-anchor" href="#安装rsync"><span>安装rsync</span></a></h2><p>web主机和backup主机都需要安装rsync</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">yum</span><span style="color:#98C379;--shiki-dark:#98C379;"> install</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -y</span><span style="color:#98C379;--shiki-dark:#98C379;"> rsync</span></span></code></pre></div><blockquote><p>yum源基本是旧版本，存在漏洞，建议官方编译进行安装，本教程仅演示</p></blockquote><h2 id="rsync服务端配置" tabindex="-1"><a class="header-anchor" href="#rsync服务端配置"><span>rsync服务端配置</span></a></h2><h3 id="编辑-etc-rsyncd-conf文件" tabindex="-1"><a class="header-anchor" href="#编辑-etc-rsyncd-conf文件"><span>编辑<code>/etc/rsyncd.conf</code>文件</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">vim</span><span style="color:#98C379;--shiki-dark:#98C379;"> /etc/rsyncd.conf</span></span></code></pre></div><p>填入以下内容：</p><div class="language-ini line-numbers-mode" data-ext="ini" data-title="ini"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">uid</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> rsync</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">gid</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> rsync</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">fake </span><span style="color:#C678DD;--shiki-dark:#C678DD;">super</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">max </span><span style="color:#C678DD;--shiki-dark:#C678DD;">connections</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> 2000</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">use </span><span style="color:#C678DD;--shiki-dark:#C678DD;">chroot</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> no</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">timeout</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> 600</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">log </span><span style="color:#C678DD;--shiki-dark:#C678DD;">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> /var/log/rsync.log</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">ignore errors</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">read </span><span style="color:#C678DD;--shiki-dark:#C678DD;">only</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> false</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">list</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> false</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">auth </span><span style="color:#C678DD;--shiki-dark:#C678DD;">users</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> rsync_backup</span></span>
<span class="line"><span style="color:#98C379;--shiki-dark:#98C379;">secrets </span><span style="color:#C678DD;--shiki-dark:#C678DD;">file</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> /etc/rsync.passwd</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">[backup]</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">path</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> /backup/</span></span>
<span class="line"><span style="color:#C678DD;--shiki-dark:#C678DD;">comment</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> =</span><span style="color:#98C379;--shiki-dark:#98C379;"> Web Backup!!!</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>相关内容和参数可自行网上搜索，本教程不作研究</p></blockquote><h3 id="编辑-etc-rsync-passwd文件" tabindex="-1"><a class="header-anchor" href="#编辑-etc-rsync-passwd文件"><span>编辑<code>/etc/rsync.passwd</code>文件</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">echo</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;rsync_backup:admin&#39;</span><span style="color:#98C379;--shiki-dark:#98C379;"> /etc/rsync.passwd</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">chmod</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 600</span><span style="color:#98C379;--shiki-dark:#98C379;"> /etc/rsync.passwd</span></span></code></pre></div><blockquote><p>格式：用户名:密码，密码实际上要尽量复杂</p><p>必须设置权限，保证只有文件所有者可读，不然会报错</p></blockquote><h3 id="添加虚拟用户" tabindex="-1"><a class="header-anchor" href="#添加虚拟用户"><span>添加虚拟用户</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">useradd</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -s</span><span style="color:#98C379;--shiki-dark:#98C379;"> /sbin/nologin</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -M</span><span style="color:#98C379;--shiki-dark:#98C379;"> rsync</span></span></code></pre></div><h3 id="启动服务" tabindex="-1"><a class="header-anchor" href="#启动服务"><span>启动服务</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379;"> enable</span><span style="color:#98C379;--shiki-dark:#98C379;"> rsyncd</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">systemctl</span><span style="color:#98C379;--shiki-dark:#98C379;"> start</span><span style="color:#98C379;--shiki-dark:#98C379;"> rsyncd</span></span></code></pre></div><h3 id="检查服务" tabindex="-1"><a class="header-anchor" href="#检查服务"><span>检查服务</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@web /]</span><span style="color:#E06C75;--shiki-dark:#E06C75;">$ps</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> -ef | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">grep</span><span style="color:#98C379;--shiki-dark:#98C379;"> rsync</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root</span><span style="color:#D19A66;--shiki-dark:#D19A66;">       3202</span><span style="color:#D19A66;--shiki-dark:#D19A66;">      1</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  0</span><span style="color:#98C379;--shiki-dark:#98C379;"> 18:00</span><span style="color:#98C379;--shiki-dark:#98C379;"> ?</span><span style="color:#98C379;--shiki-dark:#98C379;">        00:00:00</span><span style="color:#98C379;--shiki-dark:#98C379;"> /usr/bin/rsync</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --daemon</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --no-detach</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">root</span><span style="color:#D19A66;--shiki-dark:#D19A66;">       3219</span><span style="color:#D19A66;--shiki-dark:#D19A66;">   2937</span><span style="color:#D19A66;--shiki-dark:#D19A66;">  0</span><span style="color:#98C379;--shiki-dark:#98C379;"> 18:00</span><span style="color:#98C379;--shiki-dark:#98C379;"> pts/1</span><span style="color:#98C379;--shiki-dark:#98C379;">    00:00:00</span><span style="color:#98C379;--shiki-dark:#98C379;"> grep</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> --color=auto</span><span style="color:#98C379;--shiki-dark:#98C379;"> rsync</span></span>
<span class="line"><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">[root@web /]</span><span style="color:#E06C75;--shiki-dark:#E06C75;">$ss</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> -lntup | </span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">grep</span><span style="color:#98C379;--shiki-dark:#98C379;"> rsync</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">tcp</span><span style="color:#98C379;--shiki-dark:#98C379;">    LISTEN</span><span style="color:#D19A66;--shiki-dark:#D19A66;">     0</span><span style="color:#D19A66;--shiki-dark:#D19A66;">      5</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">         *</span><span style="color:#98C379;--shiki-dark:#98C379;">:873</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">                   *</span><span style="color:#98C379;--shiki-dark:#98C379;">:</span><span style="color:#E5C07B;--shiki-dark:#E5C07B;">*</span><span style="color:#98C379;--shiki-dark:#98C379;">                   users:</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">((</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">&quot;rsync&quot;</span><span style="color:#61AFEF;--shiki-dark:#61AFEF;">,pid</span><span style="color:#98C379;--shiki-dark:#98C379;">=3202,fd=3</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">tcp</span><span style="color:#98C379;--shiki-dark:#98C379;">    LISTEN</span><span style="color:#D19A66;--shiki-dark:#D19A66;">     0</span><span style="color:#D19A66;--shiki-dark:#D19A66;">      5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">      [::]:873                [::]:*                   users:((</span><span style="color:#98C379;--shiki-dark:#98C379;">&quot;rsync&quot;</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">,</span><span style="color:#E06C75;--shiki-dark:#E06C75;">pid</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">3202</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">,</span><span style="color:#E06C75;--shiki-dark:#E06C75;">fd</span><span style="color:#56B6C2;--shiki-dark:#56B6C2;">=</span><span style="color:#D19A66;--shiki-dark:#D19A66;">5</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;">))</span></span></code></pre></div><h3 id="创建共享目录" tabindex="-1"><a class="header-anchor" href="#创建共享目录"><span>创建共享目录</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mkdir</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="color:#98C379;--shiki-dark:#98C379;"> /backup/</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">sudo</span><span style="color:#98C379;--shiki-dark:#98C379;"> chown</span><span style="color:#98C379;--shiki-dark:#98C379;"> rsync.rsync</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -R</span><span style="color:#98C379;--shiki-dark:#98C379;"> /backup/</span></span></code></pre></div><h2 id="sersync客户端设置" tabindex="-1"><a class="header-anchor" href="#sersync客户端设置"><span>sersync客户端设置</span></a></h2><h3 id="安装sersync" tabindex="-1"><a class="header-anchor" href="#安装sersync"><span>安装sersync</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">wget</span><span style="color:#98C379;--shiki-dark:#98C379;"> https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/sersync/sersync2.5.4_64bit_binary_stable_final.tar.gz</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">tar</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -zvxf</span><span style="color:#98C379;--shiki-dark:#98C379;"> sersync2.5.4_64bit_binary_stable_final.tar.gz</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mkdir</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="color:#98C379;--shiki-dark:#98C379;"> /app/tools/sersync/{bin,conf}</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mv</span><span style="color:#98C379;--shiki-dark:#98C379;"> GNU-Linux-x86/sersync2</span><span style="color:#98C379;--shiki-dark:#98C379;"> /app/tools/sersync/bin</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mv</span><span style="color:#98C379;--shiki-dark:#98C379;"> GNU-Linux-x86/confxml.xml</span><span style="color:#98C379;--shiki-dark:#98C379;"> /app/tools/sersync/conf</span></span></code></pre></div><blockquote><p>实际上可以根据需要自行定制放置目录</p></blockquote><h3 id="创建备份目录" tabindex="-1"><a class="header-anchor" href="#创建备份目录"><span>创建备份目录</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">mkdir</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -p</span><span style="color:#98C379;--shiki-dark:#98C379;"> /backup/</span></span></code></pre></div><h3 id="设置密钥文件" tabindex="-1"><a class="header-anchor" href="#设置密钥文件"><span>设置密钥文件</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">echo</span><span style="color:#98C379;--shiki-dark:#98C379;"> &#39;admin&#39;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &gt; </span><span style="color:#98C379;--shiki-dark:#98C379;">/etc/rsync.passwd</span></span>
<span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">chmod</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> 600</span><span style="color:#98C379;--shiki-dark:#98C379;"> /etc/rsync.passwd</span></span></code></pre></div><h3 id="修改confxml-xml文件" tabindex="-1"><a class="header-anchor" href="#修改confxml-xml文件"><span>修改confxml.xml文件</span></a></h3><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">vim</span><span style="color:#98C379;--shiki-dark:#98C379;"> /app/tools/sersync/conf/confxml.xml</span></span></code></pre></div><p>修改<strong>23 ~ 36行</strong>xml配置，如图所示</p><figure><img src="https://s21.ax1x.com/2025/04/14/pEWhOGd.png" alt="confxml.xml文件配置参考图" tabindex="0" loading="lazy"><figcaption>confxml.xml文件配置参考图</figcaption></figure><h3 id="启动sersync服务" tabindex="-1"><a class="header-anchor" href="#启动sersync服务"><span>启动sersync服务</span></a></h3><p>添加环境变量</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">echo</span><span style="color:#98C379;--shiki-dark:#98C379;"> &quot;PATH=</span><span style="color:#E06C75;--shiki-dark:#E06C75;">$PATH</span><span style="color:#98C379;--shiki-dark:#98C379;">:/app/tools/sersync/bin&quot;</span><span style="color:#ABB2BF;--shiki-dark:#ABB2BF;"> &gt;&gt; </span><span style="color:#98C379;--shiki-dark:#98C379;">/etc/profile</span></span>
<span class="line"><span style="color:#56B6C2;--shiki-dark:#56B6C2;">source</span><span style="color:#98C379;--shiki-dark:#98C379;"> /etc/profile</span></span></code></pre></div><p>启动sersync服务</p><div class="language-bash" data-ext="bash" data-title="bash"><pre class="shiki shiki-themes one-dark-pro one-dark-pro vp-code" style="background-color:#282c34;--shiki-dark-bg:#282c34;color:#abb2bf;--shiki-dark:#abb2bf;" tabindex="0"><code><span class="line"><span style="color:#61AFEF;--shiki-dark:#61AFEF;">sersync2</span><span style="color:#D19A66;--shiki-dark:#D19A66;"> -rdo</span><span style="color:#98C379;--shiki-dark:#98C379;"> /app/tools/sersync/conf/confxml.xml</span></span></code></pre></div><figure><img src="https://s21.ax1x.com/2025/04/14/pEW4uZT.png" alt="运行成功截图" tabindex="0" loading="lazy"><figcaption>运行成功截图</figcaption></figure><blockquote><p>多个文件可以配置多个confxml.xml文件进行实时同步备份</p></blockquote><h2 id="测试服务" tabindex="-1"><a class="header-anchor" href="#测试服务"><span>测试服务</span></a></h2><p>在客户端创建文件，看服务端是否自动同步？</p><figure><img src="https://s21.ax1x.com/2025/04/14/pEW45Wj.png" alt="验证图" tabindex="0" loading="lazy"><figcaption>验证图</figcaption></figure><p>至此，sersync配置完毕！</p>`,51)]))}const c=a(r,[["render",l],["__file","rsync.html.vue"]]),t=JSON.parse(`{"path":"/study/Linux/rsync.html","title":"rsync+sersync实现实时备份同步","lang":"zh-CN","frontmatter":{"date":"2025-04-14T22:18:22.000Z","icon":"linux","star":true,"category":["study"],"tag":["Linux","Study","rsync","运维"],"description":"rsync+sersync实现实时备份同步 简介 (*´▽｀)ノノ rsync 是一个常用的 Linux 应用程序，用于文件同步，差量传输，但是每次文件发生变更需要手动去执行命令完成同步，可以依赖inotify进行检测文件变更情况，但需要另外编写脚本，就在苦恼之时，发现了一款工具——sersync，它国产开源，内置inotify+rsync命令，可以记...","head":[["meta",{"property":"og:url","content":"https://blog.fzero.me/study/Linux/rsync.html"}],["meta",{"property":"og:site_name","content":"null's Blog"}],["meta",{"property":"og:title","content":"rsync+sersync实现实时备份同步"}],["meta",{"property":"og:description","content":"rsync+sersync实现实时备份同步 简介 (*´▽｀)ノノ rsync 是一个常用的 Linux 应用程序，用于文件同步，差量传输，但是每次文件发生变更需要手动去执行命令完成同步，可以依赖inotify进行检测文件变更情况，但需要另外编写脚本，就在苦恼之时，发现了一款工具——sersync，它国产开源，内置inotify+rsync命令，可以记..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://s21.ax1x.com/2025/04/14/pEWhOGd.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-14T14:42:55.000Z"}],["meta",{"property":"article:author","content":"null"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:tag","content":"Study"}],["meta",{"property":"article:tag","content":"rsync"}],["meta",{"property":"article:tag","content":"运维"}],["meta",{"property":"article:published_time","content":"2025-04-14T22:18:22.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-14T14:42:55.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"rsync+sersync实现实时备份同步\\",\\"image\\":[\\"https://s21.ax1x.com/2025/04/14/pEWhOGd.png\\",\\"https://s21.ax1x.com/2025/04/14/pEW4uZT.png\\",\\"https://s21.ax1x.com/2025/04/14/pEW45Wj.png\\"],\\"datePublished\\":\\"2025-04-14T22:18:22.000Z\\",\\"dateModified\\":\\"2025-04-14T14:42:55.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"null\\",\\"url\\":\\"https://blog.fzero.me\\"}]}"]]},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[]},{"level":2,"title":"环境准备","slug":"环境准备","link":"#环境准备","children":[]},{"level":2,"title":"安装rsync","slug":"安装rsync","link":"#安装rsync","children":[]},{"level":2,"title":"rsync服务端配置","slug":"rsync服务端配置","link":"#rsync服务端配置","children":[{"level":3,"title":"编辑/etc/rsyncd.conf文件","slug":"编辑-etc-rsyncd-conf文件","link":"#编辑-etc-rsyncd-conf文件","children":[]},{"level":3,"title":"编辑/etc/rsync.passwd文件","slug":"编辑-etc-rsync-passwd文件","link":"#编辑-etc-rsync-passwd文件","children":[]},{"level":3,"title":"添加虚拟用户","slug":"添加虚拟用户","link":"#添加虚拟用户","children":[]},{"level":3,"title":"启动服务","slug":"启动服务","link":"#启动服务","children":[]},{"level":3,"title":"检查服务","slug":"检查服务","link":"#检查服务","children":[]},{"level":3,"title":"创建共享目录","slug":"创建共享目录","link":"#创建共享目录","children":[]}]},{"level":2,"title":"sersync客户端设置","slug":"sersync客户端设置","link":"#sersync客户端设置","children":[{"level":3,"title":"安装sersync","slug":"安装sersync","link":"#安装sersync","children":[]},{"level":3,"title":"创建备份目录","slug":"创建备份目录","link":"#创建备份目录","children":[]},{"level":3,"title":"设置密钥文件","slug":"设置密钥文件","link":"#设置密钥文件","children":[]},{"level":3,"title":"修改confxml.xml文件","slug":"修改confxml-xml文件","link":"#修改confxml-xml文件","children":[]},{"level":3,"title":"启动sersync服务","slug":"启动sersync服务","link":"#启动sersync服务","children":[]}]},{"level":2,"title":"测试服务","slug":"测试服务","link":"#测试服务","children":[]}],"git":{"createdTime":1744640918000,"updatedTime":1744641775000,"contributors":[{"name":"null-sky","email":"3057311151@qq.com","commits":2}]},"readingTime":{"minutes":2.52,"words":757},"filePathRelative":"study/Linux/rsync.md","localizedDate":"2025年4月14日","excerpt":"\\n<h2>简介</h2>\\n<div class=\\"hint-container info\\">\\n<p class=\\"hint-container-title\\">(*´▽｀)ノノ</p>\\n<p>&nbsp;&nbsp;&nbsp;&nbsp;rsync 是一个常用的 Linux 应用程序，用于文件同步，差量传输，但是每次文件发生变更需要手动去执行命令完成同步，可以依赖inotify进行检测文件变更情况，但需要另外编写脚本，就在苦恼之时，发现了一款工具——<strong><a href=\\"https://github.com/wsgzao/sersync\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">sersync</a></strong>，它国产开源，内置inotify+rsync命令，可以记录下被监听目录中发生变化的（包括增加、删除、修改）具体某一个文件或者某一个目录的名字，然后使用rsync同步的时候，只同步发生变化的文件或者目录。相对于inotify-tools遍历更快，在同步大量数据时更有优势，搭建更快，无需额外编写脚本。</p>\\n</div>","autoDesc":true}`);export{c as comp,t as data};
